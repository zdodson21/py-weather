<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./styles/style.css">
  <title>Py-Weather</title>
</head>

<body>
  <div class="contents">
    <div class="top">
      <p>{{ location.name }}, {{ location.state }}</p>
      <p>{{ date.weekday }}, {{ date.month }} {{ date.day }}</p>
    </div>

    <div class="middle">
      <div class="current-weather">
        <div class="cw-top">
          <div class="cw-left">
            <img src="./icons/{{ current.icon }}.png" alt="{{ current.alt_text }}">
          </div>

          <div class="cw-right">
            <p>
              {{ current.temp }}{% if temp_unit != 'K' %}&#176;{% endif %} {{ temp_unit }}
            </p>
          </div>
        </div>

        <div class="cw-bottom">
          <p>{{ current.description }}</p>
        </div>
      </div>

      <div class="right-side">
        <!-- TODO use CSS grid here -->
        <div class="sun-data sun-rise col-item">
          <p>Sunrise</p>
          <img src="./icons/01d.png" alt="sun rise icon">

          {% if sun.rise != None %}
            <p>
              <time datetime="{{ sun.rise }}">{{ sun.rise }}</time> 

              {% if use_half_of_day %}
                {{ sun.rise_half }}
              {% endif %}
            </p>
          {% else %}
            <p>
              ---
            </p>
          {% endif %}
        </div>

        <div class="wind-speed col-item">
          <p>Wind Speed</p>
          <img src="./icons/direction-arrow-{{ wind.deg }}.png" alt="wind icon">
          <p>{{ wind.speed }} {{ speed_unit }}</p>
        </div>

        <div class="humidity col-item">
          <p>Humidity</p>
          <img src="./icons/50d.png" alt="humidity icon">
          <p>{{ humidity }}%</p>
        </div>

        <div class="visibility col-item">
          <p>Visibility</p>
          <img src="./icons/50n.png" alt="visibility icon">
          <p>{{ visibility.symbol }} {{ visibility.distance }} km</p>
        </div>

        <div class="sun-data sun-rise col-item">
          <p>Sunset</p>
          <img src="./icons/01d.png" alt="sun set icon">

          {% if sun.set != None %}
            <p>
              <time datetime="{{ sun.set }}">{{ sun.set }}</time>
              
              {% if use_half_of_day %}  
                {{ sun.set_half }}
              {% endif %}
            </p>
          {% else %}
          <p>
            ---
          </p>
          {% endif %}
        </div>

        <div class="pressure col-item">
          <p>Pressure</p>
          <img src="./icons/03d.png" alt="pressure icon">
          <p>{{ pressure }} hPa</p>
        </div>

        <div class="uvindex col-item">
          <p>UV Index</p>
          <img src="./icons/01d.png" alt="ultra violet index icon">
          <p>{{ uvi }}</p>
        </div>

        <div class="air-quality col-item">
          <p>Air Quality</p>
          <img src="./icons/50n.png" alt="air icon" />
          <p>{{ aqi }}</p>
        </div>

        <div class="dew-point col-item">
          <p>Dew Point</p>
          <img src="./icons/50d.png" alt="dew point icon">
          <p>{{ dew_point }}&#176; {{ temp_unit }}</p>
        </div>

        <div class="cloud-coverage col-item">
          <p>Cloud Coverage</p>
          <img src="./icons/03d.png" alt="cloudiness icon">
          <p>{{ cloud_coverage }}%</p>
        </div>

        <!-- TODO acquire and display rain and snow data -->

      </div>
    </div>
    
    <div class="bottom">
      <div class="hourly-data">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <!-- One of these should be display none. Depends on screen orientation (CSS) -->
        <div class="chart-horizontal">

        </div>
        <div class="chart-vertical">

        </div>
      </div>
      <div class="daily-data">
        {% for item in daily_template_data %}
          <div class="daily-item">
            <p>{{ item.date }}</p>

            <p>
              {{ item.low_temp }}{% if temp_unit != 'K' %}&#176;{% endif %} {{ temp_unit }} 
              | 
              {{ item.high_temp }}{% if temp_unit != 'K' %}&#176; {% endif %} {{temp_unit}}
            </p>

            {% if item.sun_rise != None or item.sun_set != None %}
              <div class="daily-sun">
                <img src="./icons/01d.png" alt="sun icon">
                <p>
                  {% if item.sun_rise != None %}
                    {{ item.sun_rise }}

                    {% if use_half_of_day %}
                      {{ item.sun_rise_half_of_day }}
                    {% endif %} 
                  {% endif %}

                  {% if item.sun_rise != None and item.sun_set != None %}
                    |
                  {% endif %}
                  
                  {% if item.sun_set != None %}
                    {{ item.sun_set }}

                    {% if use_half_of_day %}
                      {{ item.sun_set_half_of_day }}
                    {% endif %}
                  {% endif %}
                </p>
              </div>
            {% endif %}

            {% if item.moon_rise != None or item.moon_set != None %}
              <div class="daily-moon">
                <img src="./icons/01n.png" alt="moon icon">
                <p>
                  {% if item.moon_rise != None %}
                    {{ item.moon_rise }}

                    {% if use_half_of_day %}
                      {{ item.moon_rise_half_of_day }}
                    {% endif %} 
                  {% endif %}

                  {% if item.moon_rise != None and item.moon_set != None %}
                    | 
                  {% endif %}

                  {% if item.moon_set != None %}
                    {{ item.moon_set }}

                    {% if use_half_of_day %}
                      {{ item.moon_set_half_of_day }}
                    {% endif %}
                  {% endif %}
                </p>
              </div>
            {% endif %}

            <p>Precip: {{ item.prob_of_precip }}%</p>

            <div class="daily-rain">
              <img src="./icons/09d.png" alt="rain icon">
              {% if item.rain_vol != None %}
                <p>{{ item.rain_vol }} {{ item.rain_units }}</p>
              {% else %}
                <p>0.00 {{ item.rain_units }}</p>
              {% endif %}
            </div>

            <div class="daily-snow">
              <img src="./icons/13d.png" alt="snow icon">
              {% if item.snow_vol != None %}
                <p>{{ item.snow_vol }} {{ item.snow_units }}</p>
              {% else %}
                <p>0.00 {{ item.snow_units }}</p>
              {% endif %}
              </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</body>
</html>
