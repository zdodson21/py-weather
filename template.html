<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./styles/style.css">
  <title>Py-Weather</title>
</head>

<body>
  <div class="contents">
    <div class="top">
      <p>{{ location_name }}, {{ location_state }}</p>
    </div>

    <div class="middle">
      <div class="current-weather">
        <div class="cw-top">
          <div class="cw-left">
            <img src="./icons/{{ cw_icon }}.png" alt="{{ cw_icon_alt }}">
          </div>

          <div class="cw-right">
            <p>{{ curr_temp }}&#176; {{ temp_unit }}</p>
          </div>
        </div>

        <div class="cw-bottom">
          <p>{{ curr_description }}</p>
        </div>
      </div>

      <div class="right-side">
        <!-- TODO use CSS grid here -->
        <div class="sun-data sun-rise col-item">
        <p>Sunrise</p>
          <img src="./icons/01d.png" alt="sun rise icon">
          <p><time datetime="{{ sun_rise_time }}">{{ sun_rise_time }}</time> 
            {% if use_half_of_day %}
              {{ sun_rise_half_of_day }}
            {% endif %}
          </p>
        </div>

        <div class="wind-speed col-item">
          <p>Wind Speed</p>
          <img src="./icons/direction-arrow-{{ wind_deg }}.png" alt="wind icon">
          <p>{{ wind_speed }} {{ speed_unit }}</p>
        </div>

        <div class="humidity col-item">
          <p>Humidity</p>
          <img src="./icons/50d.png" alt="humidity icon">
          <p>{{ humidity }}%</p>
        </div>

        <div class="visibility col-item">
          <p>Visibility</p>
          <img src="./icons/50n.png" alt="visibility icon">
          <p>{{ vis_symbol }} {{ visibility }} km</p>
        </div>

        
        <div class="sun-data sun-rise col-item">
          <p>Sunset</p>
          <img src="./icons/01d.png" alt="sun set icon">
          <p><time datetime="{{ sun_set_time }}">{{ sun_set_time }}</time>
            {% if use_half_of_day %}  
              {{ sun_set_half_of_day }}
            {% endif %}
          </p>
        </div>

        <div class="pressure col-item">
          <p>Pressure</p>
          <img src="./icons/03d.png" alt="pressure icon">
          <p>{{ pressure }} hPa</p>
        </div>

        <div class="uvindex col-item">
          <p>UV Index</p>
          <img src="./icons/01d.png" alt="ultra violet index icon">
          <p>{{ uvi }}</p>
        </div>

        <div class="air-quality col-item">
          <p>Air Quality</p>
          <img src="./icons/50n.png" alt="air icon" />
          <p>{{ aqi }}</p>
        </div>

        <div class="dew-point col-item">
          <p>Dew Point</p>
          <img src="./icons/50d.png" alt="dew point icon">
          <p>{{ dew_point }}&#176; {{ temp_unit }}</p>
        </div>

        <div class="cloud-coverage col-item">
          <p>Cloud Coverage</p>
          <img src="./icons/03d.png" alt="cloudiness icon">
          <p>{{ cloud_coverage }}%</p>
        </div>

      </div>
    </div>
    <div class="bottom">
      <div class="hourly-data">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <!-- One of these should be display none. Depends on screen orientation (CSS) -->
        <div class="chart-horizontal">

        </div>
        <div class="chart-vertical">

        </div>
      </div>
      <div class="daily-data">
        {% for item in daily_template_data %}
          <div class="daily-item">
            <p>{{ item.date }}</p>

            <p>{{ item.low_temp }}&#176; {{temp_unit}} | {{item.high_temp}}&#176; {{temp_unit}}</p>

            {% if item.sun_rise_exists or item.sun_set_exists %}
              <div class="daily-sun">
                <img src="./icons/01d.png" alt="sun icon">
                <p>
                  {% if item.sun_rise_exists %}
                    {{ item.sun_rise }}

                    {% if use_half_of_day %}
                      {{ item.sun_rise_half_of_day }}
                    {% endif %} 
                  {% endif %}

                  {% if item.sun_rise_exists and item.sun_set_exists %}
                    |
                  {% endif %}
                  
                  {% if item.sun_set_exists %}
                    {{ item.sun_set }}

                    {% if use_half_of_day %}
                      {{ item.sun_set_half_of_day }}
                    {% endif %}
                  {% endif %}
                </p>
              </div>
            {% endif %}

            {% if item.moon_rise_exists or item.moon_set_exists %}
              <div class="daily-moon">
                <img src="./icons/01n.png" alt="moon icon">
                <p>
                  {% if item.moon_rise_exists %}
                    {{ item.moon_rise }}

                    {% if use_half_of_day %}
                      {{ item.moon_rise_half_of_day }}
                    {% endif %} 
                  {% endif %}

                  {% if item.moon_rise_exists and item.moon_set_exists %}
                    | 
                  {% endif %}

                  {% if item.moon_set_exists %}
                    {{ item.moon_set }}
                    
                    {% if use_half_of_day %}
                      {{ item.moon_set_half_of_day }}
                    {% endif %}
                  {% endif %}
                </p>
              </div>
            {% endif %}

            <p>Precip: {{ item.prob_of_precip }}%</p>

            {% if item.rain_exists %}
            <div class="daily-rain">
              <img src="./icons/09d.png" alt="rain icon">
              <p>{{item.rain_vol}} {{item.rain_units}}</p>
            </div>
            {% endif %}

            {% if item.snow_exists %}
              <div class="daily-snow">
                <img src="./icons/13d.png" alt="snow icon">
                <p>{{item.snow_vol}} {{item.snow_units}}</p>
              </div>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</body>
</html>
